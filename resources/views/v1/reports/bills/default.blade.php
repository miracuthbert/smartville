<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    {{--<meta http-equiv="X-UA-Compatible" content="IE=edge">--}}
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>{{ config('app.name') }}</title>

    <style>
        .page-break {
            page-break-after: always;
        }

        table {
            border-spacing: 0;
            border-collapse: collapse;
        }

        table > thead {
            vertical-align: middle;
        }

        table > thead > tr > th {
            padding: 8px 0px;
            line-height: 1.42857143;
            text-align: left;
            vertical-align: bottom;
            border-bottom: 2px solid #ddd;
        }

        table > tbody > tr:nth-of-type(odd) {
            background-color: #f9f9f9;
        }

        table > tbody > tr > td {
            padding: 4px 0px;
            line-height: 1.42857143;
            vertical-align: top;
            border-top: 1px solid #ddd;
        }
    </style>

</head>

<body>
<div style="display: block; width: 100%">

    <!-- Report Header/Intro -->
    <table style="width: 100%; background-color:#ECF0F1;">
        <thead>
        <tr>
            <td colspan="2" style="text-align: right">
                <h1>
                    Report For {{ title_case($sort) }} Bills
                </h1>
            </td>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td colspan="2" style="text-align: right">
                {{ $company->title }}<br>
                {{ $company->address }} - {{ $company->zipcode }}<br>
                {{ $company->state }}, {{ $company->city }} {{ $company->zipcode }}<br>
                {{ $company->phone }}
            </td>
        </tr>
        </tbody>
    </table>

    <!-- Report Body-->
    @foreach($bills->chunk(15) as $_bills)
        <div style="display: block; width: 100%; border-top: 1px solid #CCCCCC">
            <table style="width: 100%; padding:20px 0 20px 0;">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Property</th>
                    <th>Tenant</th>
                    <th>Bill</th>
                    <th>Amount</th>
                    <th>Date Due.</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody>
                @foreach($_bills as $bill)
                    <tr>
                        <td>
                            {{ $bill->id }}
                        </td>
                        <td>{{ $bill->property->title }}</td>
                        <td>
                            {{ $bill->lease->tenant->user->firstname }}
                            {{ $bill->lease->tenant->user->lastname }}
                        </td>
                        <td>{{ $bill->bill->title }}</td>
                        <td>
                            @if($bill->bill->bill_plan == 0)
                                {{ $bill->unit_cost }}
                            @else
                                {{ BillTotal($bill->previous_usage, $bill->current_usage, $bill->unit_cost) }}
                            @endif
                        </td>
                        <td>{{ $bill->date_due }}</td>
                        <td>{{ BillStatusText($bill->status) }}</td>
                    </tr>
                @endforeach
                </tbody>
            </table>
        </div>

        <div style="display: block; width: 100%; border-top: 1px solid #CCCCCC">
            <table style="width: 100%; text-align: right">
                <thead>
                <tr>
                    <td colspan="2">
                        <strong>
                            Report generated by:
                            <br>
                            {{ config('app.name') }}, Inc
                        </strong>
                        <br>
                        <strong>www.smartville.co</strong>
                    </td>
                </tr>
                </thead>
            </table>
        </div>

        <!-- Check if last loop -->
        @if($loop->remaining > 0)
            <div class="page-break"></div>
        @endif
    @endforeach
</div>
</body>
</html>
